{"version":3,"sources":["../../src/controller/bom-request.js"],"names":["config","db","api","post","req","res","newBomRequest","proposedTopLevelID","body","subcomponents","requestor","save","err","send","json","message","get","find","bomRequests"],"mappings":";;;;;;AAAA;;;;AACA;;AACA;;;;AACA;;;;kBAEc,gBAAoB;AAAA,MAAjBA,MAAiB,QAAjBA,MAAiB;AAAA,MAATC,EAAS,QAATA,EAAS;;AAChC,MAAIC,MAAM,sBAAV;;AAEA;AACAA,MAAIC,IAAJ,CAAS,MAAT,iCAAgC,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC5C,QAAIC,gBAAgB,0BAApB;AACAA,kBAAcC,kBAAd,GAAmCH,IAAII,IAAJ,CAASD,kBAA5C;AACAD,kBAAcG,aAAd,GAA8BL,IAAII,IAAJ,CAASC,aAAvC;AACAH,kBAAcI,SAAd,GAA0BN,IAAII,IAAJ,CAASE,SAAnC;;AAEAJ,kBAAcK,IAAd,CAAmB,eAAO;AACxB,UAAIC,GAAJ,EAAS;AACPP,YAAIQ,IAAJ,CAASD,GAAT;AACD;AACDP,UAAIS,IAAJ,CAAS,EAACC,SAAS,oCAAV,EAAT;AACD,KALD;AAMD,GAZD;;AAcA;AACAb,MAAIc,GAAJ,CAAQ,GAAR,iCAA4B,UAACZ,GAAD,EAAMC,GAAN,EAAc;AACxC,yBAAWY,IAAX,CAAgB,EAAhB,EAAoB,UAACL,GAAD,EAAMM,WAAN,EAAsB;AACxC,UAAIN,GAAJ,EAAS;AACPP,YAAIQ,IAAJ,CAASD,GAAT;AACD;AACDP,UAAIS,IAAJ,CAASI,WAAT;AACD,KALD;AAMD,GAPD;;AASA,SAAOhB,GAAP;AACD,C","file":"bom-request.js","sourcesContent":["import mongoose from 'mongoose';\nimport { Router } from 'express';\nimport BomRequest from '../model/bom-request';\nimport { authentitcate } from '../middleware/auth-middleware';\n\nexport default({ config, db }) => {\n  let api = Router();\n  \n  // 'v1/bom-request/add' - Create\n  api.post('/add', authentitcate, (req, res) => {\n    let newBomRequest = new BomRequest();\n    newBomRequest.proposedTopLevelID = req.body.proposedTopLevelID;\n    newBomRequest.subcomponents = req.body.subcomponents;\n    newBomRequest.requestor = req.body.requestor;\n\n    newBomRequest.save(err => {\n      if (err) {\n        res.send(err);\n      }\n      res.json({message: 'New BOM Request successfully saved'});\n    });\n  });\n\n  // 'v1/bom-request' - Read\n  api.get('/', authentitcate, (req, res) => {\n    BomRequest.find({}, (err, bomRequests) => {\n      if (err) {\n        res.send(err);\n      }\n      res.json(bomRequests);\n    });\n  });\n  \n  return api;\n}"]}