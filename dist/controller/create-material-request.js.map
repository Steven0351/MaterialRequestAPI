{"version":3,"sources":["../../src/controller/create-material-request.js"],"names":["config","db","api","post","req","res","newCreateMaterialRequest","proposedTopLevelID","body","subcomponents","requestor","save","err","send","json","message","get","find","createMaterialRequests"],"mappings":";;;;;;AAAA;;;;AACA;;AACA;;;;AACA;;;;kBAEc,gBAAoB;AAAA,MAAjBA,MAAiB,QAAjBA,MAAiB;AAAA,MAATC,EAAS,QAATA,EAAS;;AAChC,MAAIC,MAAM,sBAAV;;AAEA;AACAA,MAAIC,IAAJ,CAAS,MAAT,iCAAgC,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC5C,QAAIC,2BAA2B,qCAA/B;AACAA,6BAAyBC,kBAAzB,GAA8CH,IAAII,IAAJ,CAASD,kBAAvD;AACAD,6BAAyBG,aAAzB,GAAyCL,IAAII,IAAJ,CAASC,aAAlD;AACAH,6BAAyBI,SAAzB,GAAqCN,IAAII,IAAJ,CAASE,SAA9C;;AAEAJ,6BAAyBK,IAAzB,CAA8B,eAAO;AACnC,UAAIC,GAAJ,EAAS;AACPP,YAAIQ,IAAJ,CAASD,GAAT;AACD;AACDP,UAAIS,IAAJ,CAAS,EAACC,SAAS,oCAAV,EAAT;AACD,KALD;AAMD,GAZD;;AAcA;AACAb,MAAIc,GAAJ,CAAQ,GAAR,iCAA4B,UAACZ,GAAD,EAAMC,GAAN,EAAc;AACxC,oCAAsBY,IAAtB,CAA2B,EAA3B,EAA+B,UAACL,GAAD,EAAMM,sBAAN,EAAiC;AAC9D,UAAIN,GAAJ,EAAS;AACPP,YAAIQ,IAAJ,CAASD,GAAT;AACD;AACDP,UAAIS,IAAJ,CAASI,sBAAT;AACD,KALD;AAMD,GAPD;;AASA,SAAOhB,GAAP;AACD,C","file":"create-material-request.js","sourcesContent":["import mongoose from 'mongoose';\nimport { Router } from 'express';\nimport CreateMaterialRequest from '../model/create-material-request';\nimport { authentitcate } from '../middleware/auth-middleware';\n\nexport default({ config, db }) => {\n  let api = Router();\n  \n  // 'v1/bom-request/add' - Create\n  api.post('/add', authentitcate, (req, res) => {\n    let newCreateMaterialRequest = new CreateMaterialRequest();\n    newCreateMaterialRequest.proposedTopLevelID = req.body.proposedTopLevelID;\n    newCreateMaterialRequest.subcomponents = req.body.subcomponents;\n    newCreateMaterialRequest.requestor = req.body.requestor;\n\n    newCreateMaterialRequest.save(err => {\n      if (err) {\n        res.send(err);\n      }\n      res.json({message: 'New BOM Request successfully saved'});\n    });\n  });\n\n  // 'v1/bom-request' - Read\n  api.get('/', authentitcate, (req, res) => {\n    CreateMaterialRequest.find({}, (err, createMaterialRequests) => {\n      if (err) {\n        res.send(err);\n      }\n      res.json(createMaterialRequests);\n    });\n  });\n  \n  return api;\n}"]}